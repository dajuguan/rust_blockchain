# 1 数据类型

## 1 变量与数据类型

## 变量与可变性

在rust中默认的变量是不可变的，也就是不能被重新赋值.

```text
let x =10;
x = 6;
```

就会报错。但是不并不是说它完全不可变，这涉及到一个变量隐藏的概念:

```text
    let x = 10;
    let x = x + 10;
    let x = "a";
```

重新用let声明x后，x就被替换了，并且类型也可以与之前不同，相当于变量被隐藏了。

使用mut关键字，就可以更改变量的值了，这样便于程序阅读，不至于不知道那些变量可变，哪些不可变:

```text
let mut x = 10;
x = 11;
```

## 常量

声明const关键字，并且_必须_注明其类型，常量是永远不可变的，不能声明mut关键字。 那有些同学可能会问它与不可见变量的区别是什么：

* 常量可以在全局作用域声明\(main函数之外），而变量不可以
* 常量必须指明类型，且只能赋值表达式，而不能是函数返回值等其它运行时才能计算的值

## 基本数据类型

Rust是**静态类型**语言，也就是在编译时就需要指定数据类型！ Rust的基本数据类型分为两类：标量\(scalar\)和复合\(Compond\).

## 标量

标量分为：

* 整型
  * 有符号:i32,i64...
  * 无符号:u32,u64

> Tips: 在debug模式整型溢出会使得程序异常崩溃; 在Release模式下，Rust 不检测溢出，相反会进行一种被称为二进制补码包装（two’s complement wrapping）的操作。简而言之，256 变成 0，257 变成 1，依此类推。依赖整型溢出被认为是一种错误，即便可能出现这种行为。如果你确实需要这种行为，标准库中有一个类型显式提供此功能，Wrapping。
>
> * 浮点数:f32,f64，默认采用f64
> * 布尔型：true,false
> * 字符:大小为四个字节\(four bytes\)，并代表了一个 Unicode 标量值（Unicode Scalar Value），这意味着它可以比 ASCII 表示更多内容。在 Rust 中，拼音字母（Accented letters），中文、日文、韩文等字符，emoji（绘文字）以及零长度的空白字符都是有效的 char 值

## 复合类型

分为两类：元组（tuple）和数组（array）。

## 元组

它可以将**不同类型**的值放在一起组合，并且一旦声明**长度不变**，区别于集合\(Set\)元组中也可声明数值一样元素。

```text
   let tup = (500, 6.4, 1);
    let (x, y, z) = tup;
    let (x, y, _) = tup;
    println!("{} {} {}", x, y,tup.1)
```

像上面的例子，元组支持解构\(把元组的值赋值给不同的变量\)，不需要的可以用"\_"来省略（必须省略不然编译不通过）;并且，支持通过”.索引“来访问元组的元素。

## 数组

Rust中数组也可以包含多个值，但是与元组不同的是指必须是同一个类型，并且与python等语言不一样，数组一旦声明，**长度不可变**。

```text
    let arr = [1, 2, 3];
    println!("{}", arr[0]);
    // arr[10]
    let index = 10;
    arr[index];
    println!("")
```

通过例子可以发现，数组是一整块分配在栈上的内存，并可以采用\[index\]来访问数组； 如果访问数组越界，直接给表达式的下标编译不会通过，如果给变量编译会通过，但是运行时会引发异常panicked

![](../.gitbook/assets/JOJO-TO-BE-CONTINUED.gif)

